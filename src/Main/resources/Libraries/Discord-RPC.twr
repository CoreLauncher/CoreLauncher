{
  "BuildInfo":{
    "TypeWriter":{
      "Version":"4.7.3",
      "Licence":"MIT",
      "Name":"TypeWriter"
    },
    "Date":"Sat Oct 15 17:24:51 2022"
  },
  "Package":{
    "Contact":{
      "Source":"https://github.com/Dot-lua/TypeWriter/",
      "Socials":[],
      "Website":"https://cubic-inc.ga"
    },
    "Name":"Discord-RPC",
    "Version":"1.0.0",
    "ID":"Discord-RPC",
    "Author":{
      "Contributors":[],
      "Developers":["CoreByte"]
    },
    "Entrypoints":{
      "Main":"ga.CoreLauncher.RPC.Test"
    },
    "Dependencies":{
      "Luvit":["creationix/coro-http","creationix/coro-spawn","creationix/coro-fs","creationix/base64"],
      "Dua":[],
      "Git":[]
    },
    "InfoVersion":1,
    "Description":"A Discord-RPC"
  },
  "Code":{
    "ga.CoreLauncher.RPC.Test":{
      "Code":"print(\"Hello World!\")\r\nlocal RPC = Import(\"ga.CoreLauncher.RPC\"):new(\"791927279357657088\")\r\np(RPC:SetActivity(\r\n    {\r\n        state = string.random(16),\r\n        buttons = {\r\n            {\r\n                label = \"test\",\r\n                url = \"https://cubic-inc.ga\"\r\n            }\r\n        }\r\n    }\r\n))\r\n\r\nWait(1)\r\np(\"exit\")\r\n\r\nRPC:Disconnect()",
      "Type":"Code"
    },
    "ga.CoreLauncher.RPC.Lib.NPM":{
      "Code":"local Spawn = require(\"coro-spawn\")\r\nreturn function (NodePath)\r\n    return function (Path)\r\n        local Result = Spawn(\r\n            NodePath .. \"/npm\" .. (({[\"win32\"] = \".cmd\"})[TypeWriter.Os] or \"\"),\r\n            {\r\n                args = {\r\n                    \"install\",\r\n                    \"--omit=dev\"\r\n                },\r\n                cwd = Path,\r\n                stdio = {\r\n                    process.stdin.handle,\r\n                    process.stdout.handle,\r\n                    process.stderr.handle,\r\n                }\r\n            }\r\n        )\r\n        Result.waitExit()\r\n    end\r\nend\r\n",
      "Type":"Code"
    },
    "ga.CoreLauncher.RPC.Main":{
      "Code":"local FS = require(\"fs\")\r\nlocal Request = require(\"coro-http\").request\r\n\r\nlocal ApplicationData = TypeWriter.ApplicationData .. \"/Discord-RPC/\"\r\nFS.mkdirSync(ApplicationData)\r\n\r\nTypeWriter.Runtime.LoadInternal(\"BetterEmitter\")\r\nlocal Resources = TypeWriter.LoadedPackages[\"Discord-RPC\"].Resources\r\nTypeWriter.Runtime.LoadJson(Resources[\"/OpenIPC-TypeWriter.twr\"])\r\nTypeWriter.Runtime.LoadJson(Resources[\"/Get-Node.twr\"])\r\nlocal NodePath = Import(\"ga.corebyte.get-node\").Download()\r\n\r\nlocal ThisVersion = TypeWriter.LoadedPackages[\"Discord-RPC\"].Package.Version\r\nlocal ThatVersion = FS.readFileSync(ApplicationData .. \"version.txt\")\r\n\r\nif ThisVersion ~= ThatVersion then\r\n    TypeWriter.Logger.Info(\"Out of date Discord-RPC version found, Updating...\")\r\n\r\n    local NodeFiles = ApplicationData .. \"/Node/\"\r\n    require(\"coro-fs\").rmrf(NodeFiles)\r\n    local Files = {\r\n        \"index.js\",\r\n        \"OpenIPC-NodeJs.zip\",\r\n        \"package.json\",\r\n    }\r\n    FS.mkdirSync(NodeFiles)\r\n    for Index, FilePath in pairs(Files) do\r\n        local FileData = Resources[\"/Node/\" .. FilePath]\r\n        FS.writeFileSync(NodeFiles .. FilePath, FileData)\r\n    end\r\n\r\n    Import(\"ga.CoreLauncher.RPC.Lib.Unzip\")(NodeFiles .. \"/OpenIPC-NodeJs.zip\", NodeFiles .. \"/OpenIPC\")\r\n    FS.writeFileSync(ApplicationData .. \"version.txt\", ThisVersion)\r\n\r\n    TypeWriter.Logger.Info(\"Installing npm libraries\")\r\n    local NPM = Import(\"ga.CoreLauncher.RPC.Lib.NPM\")(NodePath)\r\n    NPM(NodeFiles)\r\n    NPM(NodeFiles .. \"/OpenIPC\")\r\nend\r\n\r\nreturn Import(\"ga.CoreLauncher.RPC.RPC\")(NodePath, ApplicationData)\r\n",
      "Type":"Code"
    },
    "ga.CoreLauncher.RPC.RPC":{
      "Code":"return function (NodePath, ApplicationData)\r\n    local Emitter = Import(\"ga.corebyte.BetterEmitter\")\r\n    local Spawn = require(\"coro-spawn\")\r\n    local Json = require(\"json\")\r\n    local Base = require(\"base64\")\r\n\r\n    local RPC = Emitter:extend()\r\n\r\n    function RPC:initialize(ClientId)\r\n        local Data = {}\r\n        Data.SessionId = string.random(32)\r\n        Data.Channel = \"DiscordRPC-\" .. Data.SessionId\r\n        Data.ClientId = ClientId\r\n        self.Data = Data\r\n        self.IPC = Import(\"openipc.connector\"):new(Data.Channel, \"Main\")\r\n        local Result = Spawn(\r\n            NodePath .. \"/node\",\r\n            {\r\n                args = {\r\n                    \".\", Base.encode(Json.encode(Data))\r\n                },\r\n                cwd = ApplicationData .. \"/Node/\",\r\n                stdio = {\r\n                    process.stdin.handle,\r\n                    process.stdout.handle,\r\n                    process.stderr.handle,\r\n                }\r\n            }\r\n        )\r\n        self.NodeProcess = Result\r\n        self.IPC:RegisterMessage(\r\n            \"Connected\",\r\n            function ()\r\n                self:Emit(\"ConnectedNode\")\r\n            end\r\n        )\r\n        self:WaitFor(\"ConnectedNode\")\r\n    end\r\n\r\n    function RPC:SetActivity(Activity)\r\n        return self.IPC:Send(\"Node\", \"SetActivity\", Activity)\r\n    end\r\n\r\n    function RPC:ClearActivity()\r\n        return self.IPC:Send(\"Node\", \"ClearActivity\")\r\n    end\r\n\r\n    function RPC:Disconnect()\r\n        self:ClearActivity()\r\n        self.IPC:Send(\"Node\", \"Disconnect\")\r\n        self.IPC:Disconnect()\r\n        require(\"uv\").process_kill(self.NodeProcess.handle)\r\n    end\r\n\r\n    return RPC\r\nend",
      "Type":"Code"
    },
    "ga.CoreLauncher.RPC.Lib.Unzip":{
      "Code":"local Spawn = require(\"coro-spawn\")\r\nlocal Path = require(\"path\")\r\nlocal FS = require(\"fs\")\r\n\r\nreturn function (From, To)\r\n    FS.mkdirSync(To)\r\n    local Result, Error = Spawn(\r\n        \"tar\",\r\n        {\r\n            args = {\r\n                \"-xf\", Path.resolve(From),\r\n                \"-C\", Path.resolve(To)\r\n            }\r\n        }\r\n    )\r\n    Result.waitExit()\r\nend",
      "Type":"Code"
    },
    "ga.CoreLauncher.RPC":{
      "RedirectTo":"ga.CoreLauncher.RPC.Main",
      "Type":"Redirect"
    }
  },
  "Resources":{
    "/Node/index.js":"(async function() {\r\n    const LaunchArgs = JSON.parse(Buffer.from(process.argv[2], \"base64\"))\r\n    const RPC = new (require(\"@xhayper/discord-rpc\").Client)({clientId: LaunchArgs.ClientId})\r\n    await RPC.login()\r\n    const IpcConnection = new (require(\"./OpenIPC/index.js\"))(LaunchArgs.Channel, \"Node\")\r\n\r\n    IpcConnection.RegisterMessage(\r\n        \"SetActivity\",\r\n        async function(Activity) {\r\n            return await RPC.user?.setActivity(\r\n                Activity\r\n            );\r\n        }\r\n    )\r\n\r\n    IpcConnection.RegisterMessage(\r\n        \"ClearActivity\",\r\n        async function() {\r\n            return await RPC.user?.clearActivity();\r\n        }\r\n    )\r\n\r\n    IpcConnection.RegisterMessage(\r\n        \"Disconnect\",\r\n        async function() {\r\n            await RPC.destroy()\r\n        }\r\n    )\r\n\r\n    IpcConnection.Send(\"Main\", \"Connected\")\r\n})()",
    "/Get-Node.twr":"{\n  \"BuildInfo\":{\n    \"TypeWriter\":{\n      \"Name\":\"TypeWriter\",\n      \"Version\":\"4.7.1\",\n      \"Licence\":\"MIT\"\n    },\n    \"Date\":\"Fri Oct  7 16:09:48 2022\"\n  },\n  \"Package\":{\n    \"ID\":\"Get-Node\",\n    \"Author\":{\n      \"Developers\":[\"CoreByte\"],\n      \"Contributors\":[]\n    },\n    \"Name\":\"Get-Node\",\n    \"Contact\":{\n      \"Source\":\"https://github.com/Dot-lua/TypeWriter/\",\n      \"Website\":\"https://cubic-inc.ga\",\n      \"Socials\":[]\n    },\n    \"Dependencies\":{\n      \"Luvit\":[\"creationix/coro-http\",\"creationix/coro-spawn\"],\n      \"Dua\":[],\n      \"Git\":[]\n    },\n    \"Entrypoints\":{\n      \"Main\":\"ga.corebyte.get-node.Test\"\n    },\n    \"Version\":\"1.1.0\",\n    \"InfoVersion\":1,\n    \"Description\":\"Get-Node\"\n  },\n  \"Code\":{\n    \"ga.corebyte.get-node\":{\n      \"RedirectTo\":\"ga.corebyte.get-node.Main\",\n      \"Type\":\"Redirect\"\n    },\n    \"ga.corebyte.get-node.Test\":{\n      \"Code\":\"p(Import(\\\"ga.corebyte.get-node\\\").Download())\",\n      \"Type\":\"Code\"\n    },\n    \"ga.corebyte.get-node.Download\":{\n      \"Code\":\"local Request = require(\\\"coro-http\\\").request\\nlocal FS = require(\\\"fs\\\")\\nlocal AppData = TypeWriter.ApplicationData .. \\\"/Node/\\\"\\n\\nlocal function StartsWith(Str, Start)\\n    return (Str:sub(1, #Start) == Start)\\nend\\n\\nreturn function (Location, NoExtract)\\n    if Location == nil then\\n        Location = AppData\\n    end\\n    FS.mkdirSync(Location)\\n\\n    if FS.existsSync(Location .. \\\"node.zip\\\") == false then\\n        local Version = Import(\\\"ga.corebyte.get-node.GetTag\\\")().version\\n        local DownloadUrl = Import(\\\"ga.corebyte.get-node.GetDownloadUrl\\\")(Version)\\n        p(DownloadUrl)\\n        if DownloadUrl == false then\\n            return false\\n        end\\n        local Request, Body = Request(\\n            \\\"GET\\\",\\n            DownloadUrl\\n        )\\n        FS.writeFileSync(Location .. \\\"/node.zip\\\", Body)\\n        FS.writeFileSync(Location .. \\\"/node.version\\\", Version)\\n        \\n    end\\n    \\n    if NoExtract == true then\\n        return Location\\n    end\\n\\n    if FS.existsSync(Location .. \\\"README.md\\\") == false then\\n        Import(\\\"ga.corebyte.get-node.UnZip\\\")(Location .. \\\"node.zip\\\", Location)\\n        local File\\n        for Index, FileName in pairs(FS.readdirSync(Location)) do\\n            if StartsWith(FileName, \\\"node-\\\") then\\n                File = FileName\\n            end\\n        end\\n        for Index, FileName in pairs(FS.readdirSync(Location .. File)) do\\n            FS.renameSync(Location .. File .. \\\"/\\\" .. FileName, Location .. FileName)\\n        end\\n        FS.rmdirSync(Location .. File)\\n        if ({win32 = true})[TypeWriter.Os] ~= true then\\n            local Resources = TypeWriter.LoadedPackages[\\\"Get-Node\\\"].Resources\\n            FS.writeFileSync(Location .. \\\"/node\\\", Resources[\\\"/scripts/node\\\"])\\n            FS.writeFileSync(Location .. \\\"/npm\\\", Resources[\\\"/scripts/npm\\\"])\\n            os.execute(\\\"chmod +x \\\" .. Location .. \\\"/node\\\")\\n            os.execute(\\\"chmod +x \\\" .. Location .. \\\"/npm\\\")\\n        end\\n    end\\n    process.env.PATH = process.env.PATH .. ({win32 = \\\";\\\", darwin = \\\":\\\"})[TypeWriter.Os] .. Location\\n    return Location, FS.readFileSync(Location .. \\\"/node.version\\\")\\nend\",\n      \"Type\":\"Code\"\n    },\n    \"ga.corebyte.get-node.UnZip\":{\n      \"Code\":\"return function (From, To)\\n    local Result = require(\\\"coro-spawn\\\")(\\n        \\\"tar\\\",\\n        {\\n            args = {\\n                \\\"-xf\\\",\\n                From,\\n                \\\"-C\\\", To\\n            }\\n        }\\n    )\\n    Result.waitExit()\\nend\",\n      \"Type\":\"Code\"\n    },\n    \"ga.corebyte.get-node.GetDownloadUrl\":{\n      \"Code\":\"local Request = require(\\\"coro-http\\\").request\\nlocal BaseUrl = \\\"https://nodejs.org/dist/\\\"\\n\\nlocal Names =  {\\n    [\\\"win32\\\"] = \\\"node-%s-win-%s.zip\\\",\\n    [\\\"linux\\\"] = \\\"node-%s-linux-%s.tar.gz\\\",\\n    [\\\"darwin\\\"] = \\\"node-%s-darwin-%s.tar.gz\\\"\\n}\\n\\nreturn function (Version)\\n    if Names[TypeWriter.Os] == nil then\\n        return false\\n    end\\n    return BaseUrl .. Version .. \\\"/\\\" .. string.format(\\n        Names[TypeWriter.Os],\\n        Version,\\n        require(\\\"jit\\\").arch\\n    )\\nend\",\n      \"Type\":\"Code\"\n    },\n    \"ga.corebyte.get-node.GetTag\":{\n      \"Code\":\"return function ()\\n    local Request, Body = require(\\\"coro-http\\\").request(\\n        \\\"GET\\\",\\n        \\\"https://nodejs.org/dist/index.json\\\"\\n    )\\n    local Versions = require(\\\"json\\\").decode(Body)\\n    local LtsVersions = {}\\n    for Index, Version in pairs(Versions) do\\n        if Version.lts then\\n            table.insert(LtsVersions, Version)\\n        end\\n    end\\n    return LtsVersions[1]\\nend\",\n      \"Type\":\"Code\"\n    },\n    \"ga.corebyte.get-node.Main\":{\n      \"Code\":\"return {\\n    Download = Import(\\\"ga.corebyte.get-node.Download\\\"),\\n    GetDownloadUrl = Import(\\\"ga.corebyte.get-node.GetDownloadUrl\\\"),\\n    GetTag = Import(\\\"ga.corebyte.get-node.GetTag\\\"),\\n}\\n\",\n      \"Type\":\"Code\"\n    }\n  },\n  \"Resources\":{\n    \"/package.info.lua\":\"-- See https://github.com/Dot-lua/TypeWriter/wiki/package.info.lua-format for more info\\n\\nreturn { InfoVersion = 1, -- Dont touch this\\n\\n    ID = \\\"Get-Node\\\",\\n    Name = \\\"Get-Node\\\",\\n    Description = \\\"Get-Node\\\",\\n    Version = \\\"1.1.0\\\",\\n\\n    Author = {\\n        Developers = {\\n            \\\"CoreByte\\\"\\n        },\\n        Contributors = {}\\n    },\\n\\n    Dependencies = {\\n        Luvit = {\\n            \\\"creationix/coro-http\\\",\\n            \\\"creationix/coro-spawn\\\"\\n        },\\n        Git = {},\\n        Dua = {}\\n    },\\n\\n    Contact = {\\n        Website = \\\"https://cubic-inc.ga\\\",\\n        Source = \\\"https://github.com/Dot-lua/TypeWriter/\\\",\\n        Socials = {}\\n    },\\n\\n    Entrypoints = {\\n        Main = \\\"ga.corebyte.get-node.Test\\\"\\n    }\\n\\n}\\n\",\n    \"/scripts/node\":\"#!/usr/bin/env sh\\nSCRIPT=$(readlink -f \\\"$0\\\")\\nSCRIPTPATH=$(dirname \\\"$SCRIPT\\\")\\n\\\"$SCRIPTPATH/bin/node\\\" \\\"$@\\\"\",\n    \"/scripts/npm\":\"#!/usr/bin/env sh\\nSCRIPT=$(readlink -f \\\"$0\\\")\\nSCRIPTPATH=$(dirname \\\"$SCRIPT\\\")\\n\\\"$SCRIPTPATH/bin/npm\\\" \\\"$@\\\"\"\n  }\n}",
    "/Node/OpenIPC-NodeJs.zip":"PK\u0003\u0004\u0014\u0000\u0000\u0000\b\u0000∑Ü\u0006Uπyî{˜\u0000\u0000\u0000ô\u0002\u0000\u0000\u0015\u0000\u0000\u0000lib\\WaitForEmitter.jsçí¡nÉ0\fÜÔï˙\u000eQ/\rRŸ\u0003t‚ÿùwò¥s\u0014\\5\u0012$Ãv⁄N\u0015Ôæ$\u0014F\u0004ìÊ\u000b˘∑˝'X;K,NW∞|j\r3†®\u0004\u00977\br\u0007ë”Æÿnt“}*√o\u000eì|¶€ﬂ\u0002/œ\u000eÀTPvËZC∞\u000fu°≤QDSÂs\u0006‹\u0019lM˘‡«v#B§QË5;î≈\bcêÔ †◊ÅÙ√C—∑’c{ô˙\u001dƒái¡˘ÚéP\u001b≠\u0018≤FÊ,‰S\"™JXﬂ4Y>\u0006\u0002{¥B≈£eÁñπ.\u0006_\f\u001dñx0≥‰ì©ï‹câ˙\u001c\u0015øü≥Ã\u007fÌÆX]≥˘ó≈\u0015{<\\‰qºÙ\\1≥XLˇ≠è{—∫⁄7\u0002˜Œ!Sÿ¶|E~\u0000PK\u0003\u0004\u0014\u0000\u0000\u0000\b\u0000≤Ñ\tUêï ¥1\u0004\u0000\u0000¿\f\u0000\u0000\b\u0000\u0000\u0000index.jsµVms‚6\u0010˛û\u0019˛É ¥\u0013”pˆëKhèñŒ‹a“„zÅ\u0014h”óÈÙ\u0014YÄ/∆‚$\u0011B3¸˜Ó Ô∆$Èá˙É≠Òæ=ª˚h%&B•…5ııÖê˝•Ø5ó§K$ˇºˆ%∑ém'oú¢‹˛§é\u001bµ#\u0016ôÚõâ`∑\\Á¨ÍÎ–ø„R—‡≈Üﬂ(#~¡\u0002üá∫\u000eÜµ#«YhΩR\u001d«Qö≤[\u0001 ≥@ll&ñ\u000euZØŒ^üù∂kG≥u»¥/B2¶°'ñ\u0013-˝pn\u0005<úÎEÉ<‘é\b<wTB`µ\u000e4…û.9>ŒƒlA%eÄ\\e‚7o{nˇ‚«wÉ˜?}∏\u001céÆ~\u001eO¶ø¸z˝€Ô\u007f–\u001bÊÒŸ|·\u007f∫\rñ°X}ñJØÔ6˜€\u007f^∂N_ùù∑ø˘ˆu•Û\u000f\u0006\u00188œ~Ÿ\u0011ÿH{&$±åç\u000fJ/øÉœ˜$RÄı…\tIs¬'ŒÈ§‡\u000eóo¥uIı\u0086ä\t\u0019-•©è’ _ìÃA\u0019X£\u0011…v—GrΩña\u001c¶v¥√æ∞Ä*E\u0006+÷3Õ\"¸^Û–Se~ƒ(\r\u0001‰öiÄ—[–0‰Aì\fÈí\u0017ÚPÎ\u0015óV#˚°\u0017æ≤c}®Cº*…—\r\bÒSíºÉ\\\u0003leó<\u0018–â\u0014\u000b;\u0005çûI¢k¥Ûrcùßk»7\u0019}≠è\u001b‰c \u0018\r\u0016BÈŒÈyª}Ó‹µ\u001cH3‰L;_>ƒPw∞D`ªèÂ¨Ro∂\u0000‚\u0010Ç§\u001c∂\nU¡'\u0005ks(¨UÔEÅ∏Wœ˘›=\u0012Ç\u0005BÒˇ\u0016√ı\u0015´\nS•;6\f©7…√‡™˜∑;òÙF√aø7Ìª\u001d\u0002}Áªg¬\\r•Ë\u001cÅRµ\rY\u000eÆG5›Éå}tãø¸Y§kõó\u0006ZÓY·„bà\rpï\u0014ï≠R¢;¬\u0003(‹\u0001\u000f9[\u0011èú≤}\u0005`ŒÑ«=0\u007f?\u0019\rÌ\u0015ïä[Ó¡\u0002G$\u001eÑ0–\u007fl]]œÑ√)Ÿ£*é˘‹W∞\u001b/£ÍZ»»&πàk[®Oaﬂ¸âä\u007f\u0001–Dµ“{\u0019`¡\u001f∂√µ„¿”Ì\nZ€%\t]ˆ:c¢ó\u0018UÆL4å*”«`≈\u0004\\;N\u0001∂:\bˆ\u0002‚\\\u0012\u0001∑\u00031∑Í#ÿÜ@_Ú\u0003ôJ\u001f\u001a§\u0005Y\u0018GÑíP‡àÉ**»ë$4µæR\rÑh¢<\u001f'≤  œ\u0005Ó§L¨Ñ\u000e’C%\fr!≈\u0012ø\u00138;y»Ú\u0001s\u000eÆ•ØπUƒRè\u001bPo\u0016ˇW–z*:I®}a\u0012πìCQ°ÜÄ;π\f+TråË§|8∏u\u001aïƒ3ô\u0012\u000b}4…\u0015›\u0006ÇzÖ\u000eG◊é∏∆Âig\"\u001b€¢ v‘I\u0016è3-\u001b^íSo;—\u0014 }—%≠=™Â[\u0014ùëOèÒºM\u001aH¡9kô—°Ã»Òg[\u000bslTWiÇÍS\u0011\u001d∑’uB>&ÌÑJ\u0015ÆP≠ˆˇF3\u0000ı\u0018≈û$XúJÖ\u001cSÌD\t?EΩ\u0004ÚS‹√'‚”°ùõv5\u001d]8rJ\u0000≤\u0003Õ≠<ó‚´V∂Ωpt%ÎÁ`Dff\bÌÚqåÓ@ﬁ\u000b\u001e\u0007>p~7\t˛Ôè«£q|†Á¯ZyD∆˛rPµ«Ú\u0012Y≥;GÒ~Rπ\u0011Ãù∆ Xo|-Ö∑ÜÅŒÔWBjº€•W‘\u007f\u0001PK\u0003\u0004\u0014\u0000\u0000\u0000\b\u0000ë¢\u0006UŒd≤Ê~\u0000\u0000\u0000∑\u0000\u0000\u0000\f\u0000\u0000\u0000package.jsonmé1\u000eÉ0\fE˜ú\" å£B\u0017‘πÁ®\u0004¡HV©Éí4\b!Ó^7TL]ﬂ\u007fˇ€õ“⁄\f8#\u000f»é0öõﬁÑ\t}3e\f±õ`¡>z˜ƒ\u0004n\"‰$éy‘ˆb\u001bS\u001dÓ“QÇ—\u0007¿,9Ã¡ø(‚œ\u0013ÛÙba≠mmm\u0004Ì’q?ﬂˇæêàW\u001a◊“πñùoGÌÍ\u0003PK\u0001\u0002\u0014\u0000\u0014\u0000\u0000\u0000\b\u0000∑Ü\u0006Uπyî{˜\u0000\u0000\u0000ô\u0002\u0000\u0000\u0015\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000lib\\WaitForEmitter.jsPK\u0001\u0002\u0014\u0000\u0014\u0000\u0000\u0000\b\u0000≤Ñ\tUêï ¥1\u0004\u0000\u0000¿\f\u0000\u0000\b\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000*\u0001\u0000\u0000index.jsPK\u0001\u0002\u0014\u0000\u0014\u0000\u0000\u0000\b\u0000ë¢\u0006UŒd≤Ê~\u0000\u0000\u0000∑\u0000\u0000\u0000\f\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000Å\u0005\u0000\u0000package.jsonPK\u0005\u0006\u0000\u0000\u0000\u0000\u0003\u0000\u0003\u0000≥\u0000\u0000\u0000)\u0006\u0000\u0000\u0000\u0000",
    "/package.info.lua":"-- See https://github.com/Dot-lua/TypeWriter/wiki/package.info.lua-format for more info\r\n\r\nreturn { InfoVersion = 1, -- Dont touch this\r\n\r\n    ID = \"Discord-RPC\", -- A unique id \r\n    Name = \"Discord-RPC\",\r\n    Description = \"A Discord-RPC\",\r\n    Version = \"1.0.0\",\r\n\r\n    Author = {\r\n        Developers = {\r\n            \"CoreByte\"\r\n        },\r\n        Contributors = {}\r\n    },\r\n\r\n    Dependencies = {\r\n        Luvit = {\r\n            \"creationix/coro-http\",\r\n            \"creationix/coro-spawn\",\r\n            \"creationix/coro-fs\",\r\n            \"creationix/base64\",\r\n        },\r\n        Git = {},\r\n        Dua = {}\r\n    },\r\n\r\n    Contact = {\r\n        Website = \"https://cubic-inc.ga\",\r\n        Source = \"https://github.com/Dot-lua/TypeWriter/\",\r\n        Socials = {}\r\n    },\r\n\r\n    Entrypoints = {\r\n        Main = \"ga.CoreLauncher.RPC.Test\"\r\n    }\r\n\r\n}\r\n",
    "/OpenIPC-TypeWriter.twr":"{\n  \"BuildInfo\":{\n    \"Date\":\"Sat Oct 15 16:13:26 2022\",\n    \"TypeWriter\":{\n      \"Name\":\"TypeWriter\",\n      \"Version\":\"4.7.3\",\n      \"Licence\":\"MIT\"\n    }\n  },\n  \"Package\":{\n    \"Description\":\"OpenIPC-TypeWriter Client\",\n    \"Dependencies\":{\n      \"Git\":[],\n      \"Luvit\":[\"creationix/coro-spawn\",\"creationix/coro-http\",\"creationix/coro-websocket\"],\n      \"Dua\":[]\n    },\n    \"Contact\":{\n      \"Source\":\"\",\n      \"Socials\":[],\n      \"Website\":\"\"\n    },\n    \"Name\":\"OpenIPC-TypeWriter\",\n    \"Version\":\"1.0.0\",\n    \"Entrypoints\":{\n      \"Main\":\"openipc.connector.Test\"\n    },\n    \"Author\":{\n      \"Developers\":[\"CoreByte\"],\n      \"Contributors\":[]\n    },\n    \"InfoVersion\":1,\n    \"ID\":\"OpenIPC-TypeWriter\"\n  },\n  \"Code\":{\n    \"openipc.connector.Main\":{\n      \"Code\":\"TypeWriter.Runtime.LoadInternal(\\\"BetterEmitter\\\")\\r\\nlocal AppData = TypeWriter.ApplicationData .. \\\"/Open-IPC/\\\"\\r\\nlocal FS = require(\\\"fs\\\")\\r\\nFS.mkdirSync(AppData)\\r\\nFS.writeFileSync(\\r\\n    AppData .. \\\"IPC-Host.twr\\\",\\r\\n    TypeWriter.LoadedPackages[\\\"OpenIPC-TypeWriter\\\"].Resources[\\\"/IPC-Host.twr\\\"]\\r\\n)\\r\\nreturn Import(\\\"openipc.connector.Classes.IPCConnection\\\")\",\n      \"Type\":\"Code\"\n    },\n    \"openipc.connector\":{\n      \"RedirectTo\":\"openipc.connector.Main\",\n      \"Type\":\"Redirect\"\n    },\n    \"openipc.connector.Test\":{\n      \"Code\":\"local Id = tonumber(TypeWriter.ArgumentParser:GetArgument(\\\"id\\\", \\\"id\\\"))\\r\\nlocal Connection = Import(\\\"openipc.connector\\\"):new(\\r\\n    \\\"Test\\\",\\r\\n    Id\\r\\n)\\r\\nlocal Other = ({[1] = 2, [2] = 1})[Id]\\r\\n\\r\\nConnection:RegisterMessage(\\r\\n    \\\"Echo\\\",\\r\\n    function (Data, From)\\r\\n        p(\\\"Echo\\\", Data, From)\\r\\n        return Data\\r\\n    end\\r\\n)\\r\\n\\r\\np(Connection:Send(\\r\\n    Other,\\r\\n    \\\"Echo\\\",\\r\\n    {\\r\\n        Message = \\\"Hello World\\\"\\r\\n    }\\r\\n))\",\n      \"Type\":\"Code\"\n    },\n    \"openipc.connector.Classes.IPCConnection\":{\n      \"Code\":\"local Connection = Import(\\\"ga.corebyte.BetterEmitter\\\"):extend()\\r\\nlocal WebSocket = Import(\\\"openipc.connector.Helper.WebSocket\\\")\\r\\nlocal StartHost = Import(\\\"openipc.connector.Helper.StartHost\\\")\\r\\nlocal Json = require(\\\"json\\\")\\r\\n\\r\\nfunction Connection:initialize(Channel, Name)\\r\\n    self.Channel = Channel\\r\\n    self.Name = Name\\r\\n    self.Handlers = {}\\r\\n\\r\\n    StartHost()\\r\\n\\r\\n    local Response, Read, Write = WebSocket(\\r\\n        string.format(\\r\\n            \\\"ws://localhost:25665/v1/connect/%s/%s\\\",\\r\\n            Channel,\\r\\n            Name\\r\\n        )    \\r\\n    )\\r\\n    self.Connection = {\\r\\n        Read = Read,\\r\\n        Write = Write\\r\\n    }\\r\\n\\r\\n    coroutine.wrap(function ()\\r\\n        self:Emit(\\\"Connected\\\")\\r\\n        TypeWriter.Logger.Info(\\\"OpenIPC > Connected to the host.\\\")\\r\\n        for Message in Read do\\r\\n            local Payload = Message.payload\\r\\n            local Decoded = Json.decode(Payload)\\r\\n            coroutine.wrap(function ()\\r\\n                self:HandleIncoming(Decoded)\\r\\n            end)()\\r\\n        end\\r\\n        self:Emit(\\\"Disconnected\\\")\\r\\n        self:Emit(\\\"Return\\\", {IPC_DISCONNECTED = true})\\r\\n    end)()\\r\\nend\\r\\n\\r\\nfunction Connection:RegisterMessage(Message, Fn)\\r\\n    self.Handlers[Message] = Fn\\r\\n    return self\\r\\nend\\r\\n\\r\\nfunction Connection:HandleIncoming(D)\\r\\n    if D.MessageType == \\\"Return\\\" then\\r\\n        self:Emit(\\\"Return\\\", D)\\r\\n        return\\r\\n    end\\r\\n    if self.Handlers[D.Name] == nil then\\r\\n        TypeWriter.Logger.Info(\\\"Tried to handle a not existsing message (%s)\\\", D.Name)\\r\\n        return\\r\\n    end\\r\\n    local ReturnData = self.Handlers[D.Name](D.Data, D.From, D.Sequence)\\r\\n    self:Write(\\r\\n        \\\"Message\\\",\\r\\n        {\\r\\n            To = D.From,\\r\\n            Sequence = D.Sequence,\\r\\n            Data = ReturnData,\\r\\n            MessageType = \\\"Return\\\"\\r\\n        }\\r\\n    )\\r\\nend\\r\\n\\r\\nfunction Connection:Write(Type, Payload)\\r\\n    local Data = {\\r\\n        Type = Type,\\r\\n        Payload = Payload\\r\\n    }\\r\\n    self.Connection.Write(\\r\\n        {\\r\\n            payload = Json.encode(Data)\\r\\n        }\\r\\n    )\\r\\nend\\r\\n\\r\\nfunction Connection:Send(To, Name, Payload)\\r\\n    local Sequence = string.random(16)\\r\\n    self:Write(\\r\\n        \\\"Message\\\",\\r\\n        {\\r\\n            To = To,\\r\\n            Sequence = Sequence,\\r\\n            Data = Payload,\\r\\n            Name = Name,\\r\\n            MessageType = \\\"Message\\\"\\r\\n        }\\r\\n    )\\r\\n    local Returned, ReturnedData = self:WaitFor(\\\"Return\\\", nil,\\r\\n        function (Data)\\r\\n            return Data.Sequence == Sequence or Data.Disconnected == true\\r\\n        end\\r\\n    )\\r\\n    if ReturnedData.IPC_DISCONNECTED == true then\\r\\n        return {IPC_DISCONNECTED = true, IPC_ERROR = true}\\r\\n    else\\r\\n        return ReturnedData.Data\\r\\n    end\\r\\nend\\r\\n\\r\\nfunction Connection:Disconnect()\\r\\n    self.Connection.Write()\\r\\nend\\r\\n\\r\\nreturn Connection\",\n      \"Type\":\"Code\"\n    },\n    \"openipc.connector.Helper.WebSocket\":{\n      \"Code\":\"local CoroWebsocket = require(\\\"coro-websocket\\\")\\r\\n\\r\\nreturn function (Url)\\r\\n    return CoroWebsocket.connect(CoroWebsocket.parseUrl(Url))\\r\\nend\",\n      \"Type\":\"Code\"\n    },\n    \"openipc.connector.Helper.StartHost\":{\n      \"Code\":\"local Request = require(\\\"coro-http\\\").request\\r\\nlocal Spawn = require(\\\"coro-spawn\\\")\\r\\nlocal Json = require(\\\"json\\\")\\r\\nlocal FS = require(\\\"fs\\\")\\r\\n\\r\\nlocal ApplicationDataFolder = TypeWriter.Folder .. \\\"/ApplicationData/Open-IPC/\\\"\\r\\n\\r\\nlocal function Check()\\r\\n    local Success = pcall(Request, \\\"GET\\\", \\\"http://localhost:25665/\\\")\\r\\n    return Success\\r\\nend\\r\\n\\r\\nlocal function Start()\\r\\n    local Result, Error = Spawn(\\r\\n        TypeWriter.This,\\r\\n        {\\r\\n            args = {\\r\\n                \\\"execute\\\",\\r\\n                \\\"--input=\\\" .. ApplicationDataFolder .. \\\"IPC-Host.twr\\\",\\r\\n            },\\r\\n            detached = true,\\r\\n            hide = true\\r\\n        }\\r\\n    )\\r\\n    repeat\\r\\n        Sleep(50)\\r\\n        TypeWriter.Logger.Warn(\\\"OpenIPC > Could not connect to the host. Retrying...\\\")\\r\\n    until Check()\\r\\nend\\r\\n\\r\\nreturn function ()\\r\\n    local Running = Check()\\r\\n    if not Running then\\r\\n        Start()\\r\\n        return false\\r\\n    end\\r\\n    return true\\r\\nend\",\n      \"Type\":\"Code\"\n    }\n  },\n  \"Resources\":{\n    \"/IPC-Host.twr\":\"{\\n  \\\"BuildInfo\\\":{\\n    \\\"TypeWriter\\\":{\\n      \\\"Name\\\":\\\"TypeWriter\\\",\\n      \\\"Version\\\":\\\"4.7.3\\\",\\n      \\\"Licence\\\":\\\"MIT\\\"\\n    },\\n    \\\"Date\\\":\\\"Sat Oct 15 16:13:25 2022\\\"\\n  },\\n  \\\"Package\\\":{\\n    \\\"InfoVersion\\\":1,\\n    \\\"Description\\\":\\\"A IPC-Host\\\",\\n    \\\"Dependencies\\\":{\\n      \\\"Git\\\":[],\\n      \\\"Luvit\\\":[\\\"creationix/weblit\\\"],\\n      \\\"Dua\\\":[]\\n    },\\n    \\\"Contact\\\":{\\n      \\\"Source\\\":\\\"\\\",\\n      \\\"Socials\\\":[],\\n      \\\"Website\\\":\\\"\\\"\\n    },\\n    \\\"ID\\\":\\\"IPC-Host\\\",\\n    \\\"Author\\\":{\\n      \\\"Developers\\\":[\\\"CoreByte\\\"],\\n      \\\"Contributors\\\":[]\\n    },\\n    \\\"Name\\\":\\\"IPC-Host\\\",\\n    \\\"Version\\\":\\\"1.0.0\\\",\\n    \\\"Entrypoints\\\":{\\n      \\\"Main\\\":\\\"openipc.host\\\"\\n    }\\n  },\\n  \\\"Code\\\":{\\n    \\\"openipc.host.Server\\\":{\\n      \\\"Code\\\":\\\"return function (Port, Host)\\\\r\\\\n    if Host == nil then\\\\r\\\\n        Host = \\\\\\\"127.0.0.1\\\\\\\"\\\\r\\\\n    end\\\\r\\\\n    require(\\\\\\\"weblit-websocket\\\\\\\")\\\\r\\\\n    local App = require(\\\\\\\"weblit\\\\\\\").app\\\\r\\\\n    local Proxy = Import(\\\\\\\"openipc.host.Proxy\\\\\\\"):new()\\\\r\\\\n\\\\r\\\\n    App.bind(\\\\r\\\\n        {\\\\r\\\\n            host = Host,\\\\r\\\\n            port = Port\\\\r\\\\n        }\\\\r\\\\n    )\\\\r\\\\n    \\\\r\\\\n    App.use(require('weblit-auto-headers'))\\\\r\\\\n    App.route(\\\\r\\\\n        {\\\\r\\\\n            method = \\\\\\\"GET\\\\\\\",\\\\r\\\\n            path = \\\\\\\"/\\\\\\\",\\\\r\\\\n        },\\\\r\\\\n        function (Request, Response)\\\\r\\\\n            Response.body = \\\\\\\"Running version \\\\\\\" .. TypeWriter.LoadedPackages[\\\\\\\"IPC-Host\\\\\\\"].Package.Version\\\\r\\\\n            Response.code = 200\\\\r\\\\n        end\\\\r\\\\n    )\\\\r\\\\n\\\\r\\\\n    App.websocket(\\\\r\\\\n        {\\\\r\\\\n            path = \\\\\\\"/v1/connect/:Channel/:Name\\\\\\\"\\\\r\\\\n        },\\\\r\\\\n        function (Request, Read, Write)\\\\r\\\\n            Proxy:NewConnection(Request, Read, Write)\\\\r\\\\n        end\\\\r\\\\n    )\\\\r\\\\n    \\\\r\\\\n    App.start()\\\\r\\\\nend\\\",\\n      \\\"Type\\\":\\\"Code\\\"\\n    },\\n    \\\"openipc.host.Proxy\\\":{\\n      \\\"Code\\\":\\\"local Proxy = Object:extend()\\\\r\\\\nlocal Json = require(\\\\\\\"json\\\\\\\")\\\\r\\\\n\\\\r\\\\nfunction Proxy:initialize()\\\\r\\\\n    self.Connections = {}\\\\r\\\\nend\\\\r\\\\n\\\\r\\\\nfunction Proxy:NewConnection(Request, Read, Write)\\\\r\\\\n    local Connections = self.Connections\\\\r\\\\n\\\\r\\\\n    local Channel = Request.params.Channel\\\\r\\\\n    local Name = Request.params.Name\\\\r\\\\n\\\\r\\\\n    if not Connections[Channel] then\\\\r\\\\n        Connections[Channel] = {}\\\\r\\\\n    end\\\\r\\\\n    Connections[Channel][Name] = {\\\\r\\\\n        Read = Read,\\\\r\\\\n        Write = Write,\\\\r\\\\n        Channel = Channel,\\\\r\\\\n        Name = Name\\\\r\\\\n    }\\\\r\\\\n    TypeWriter.Logger.Info(\\\\\\\"New connection using channel %s and id %s\\\\\\\", Channel, Name)\\\\r\\\\n    local Connection = Connections[Channel][Name]\\\\r\\\\n    for Message in Read do\\\\r\\\\n        local Payload = Message.payload\\\\r\\\\n        local Decoded = Json.decode(Payload)\\\\r\\\\n        if Decoded ~= nil then\\\\r\\\\n            self:HandleMessage(Connection, Decoded)\\\\r\\\\n        end\\\\r\\\\n    end\\\\r\\\\n    TypeWriter.Logger.Info(\\\\\\\"Connection %s from channel %s closed\\\\\\\", Name, Channel)\\\\r\\\\n    Connections[Channel][Name] = nil\\\\r\\\\n    local C = table.count(Connections[Channel])\\\\r\\\\n    TypeWriter.Logger.Info(\\\\\\\"%s remaining connections on channel %s\\\\\\\", C, Channel)\\\\r\\\\n    if C == 0 then\\\\r\\\\n        TypeWriter.Logger.Info(\\\\\\\"Shutting down channel %s\\\\\\\", Channel)\\\\r\\\\n        Connections[Channel] = nil\\\\r\\\\n    end\\\\r\\\\nend\\\\r\\\\n\\\\r\\\\nlocal Handlers = {\\\\r\\\\n    [\\\\\\\"Message\\\\\\\"] = function (self, Connection, Payload)\\\\r\\\\n        local Channel = Connection.Channel\\\\r\\\\n        local Name = Connection.Name\\\\r\\\\n        local To = Payload.To\\\\r\\\\n        \\\\r\\\\n        Payload.From = Name\\\\r\\\\n        Payload.Type = \\\\\\\"Message\\\\\\\"\\\\r\\\\n\\\\r\\\\n        if self.Connections[Channel][To] == nil then\\\\r\\\\n            TypeWriter.Logger.Info(\\\\\\\"Tried to send to a not existsing connection (%s)\\\\\\\", To)\\\\r\\\\n            Connection.Write(\\\\r\\\\n                {\\\\r\\\\n                    payload = Json.encode(\\\\r\\\\n                        {\\\\r\\\\n                            Type = \\\\\\\"Message\\\\\\\",\\\\r\\\\n                            MessageType = \\\\\\\"Return\\\\\\\",\\\\r\\\\n                            From = Name,\\\\r\\\\n                            To = Name,\\\\r\\\\n                            Sequence = Payload.Sequence,\\\\r\\\\n                            Data = {\\\\r\\\\n                                IPC_ERROR = true,\\\\r\\\\n                                IPC_ERROR_MESSAGE = \\\\\\\"The recipient is not connected.\\\\\\\",\\\\r\\\\n                                IPC_NOT_CONNECTED = true\\\\r\\\\n                            }\\\\r\\\\n                        }\\\\r\\\\n                    )\\\\r\\\\n                }\\\\r\\\\n            )\\\\r\\\\n            return\\\\r\\\\n        end\\\\r\\\\n        p(Payload)\\\\r\\\\n        self.Connections[Channel][To].Write(\\\\r\\\\n            {payload = Json.encode(Payload)}\\\\r\\\\n        )\\\\r\\\\n    end\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\nfunction Proxy:HandleMessage(Connection, Payload)\\\\r\\\\n    local Channel = Connection.Channel\\\\r\\\\n    local Name = Connection.Name\\\\r\\\\n    TypeWriter.Logger.Info(\\\\\\\"Message received on channel %s from %s\\\\\\\", Channel, Name)\\\\r\\\\n    if Handlers[Payload.Type] ~= nil then\\\\r\\\\n        Payload.Payload.To = tostring(Payload.Payload.To)\\\\r\\\\n        Handlers[Payload.Type](self, Connection, Payload.Payload)\\\\r\\\\n    else\\\\r\\\\n        TypeWriter.Logger.Error(\\\\\\\"Unknown message type %s\\\\\\\", Payload.Type)\\\\r\\\\n    end\\\\r\\\\nend\\\\r\\\\n\\\\r\\\\n\\\\r\\\\n\\\\r\\\\nreturn Proxy\\\",\\n      \\\"Type\\\":\\\"Code\\\"\\n    },\\n    \\\"openipc.host\\\":{\\n      \\\"Type\\\":\\\"Redirect\\\",\\n      \\\"RedirectTo\\\":\\\"openipc.host.Main\\\"\\n    },\\n    \\\"openipc.host.Main\\\":{\\n      \\\"Code\\\":\\\"require(\\\\\\\"uv\\\\\\\").set_process_title(\\\\\\\"TypeWriter - OpenIPC - Host\\\\\\\")\\\\r\\\\nImport(\\\\\\\"openipc.host.Server\\\\\\\")(25665)\\\",\\n      \\\"Type\\\":\\\"Code\\\"\\n    }\\n  },\\n  \\\"Resources\\\":{\\n    \\\"/package.info.lua\\\":\\\"-- See https://github.com/Dot-lua/TypeWriter/wiki/package.info.lua-format for more info\\\\r\\\\n\\\\r\\\\nreturn { InfoVersion = 1, -- Dont touch this\\\\r\\\\n\\\\r\\\\n    ID = \\\\\\\"IPC-Host\\\\\\\", -- A unique id \\\\r\\\\n    Name = \\\\\\\"IPC-Host\\\\\\\",\\\\r\\\\n    Description = \\\\\\\"A IPC-Host\\\\\\\",\\\\r\\\\n    Version = \\\\\\\"1.0.0\\\\\\\",\\\\r\\\\n\\\\r\\\\n    Author = {\\\\r\\\\n        Developers = {\\\\r\\\\n            \\\\\\\"CoreByte\\\\\\\"\\\\r\\\\n        },\\\\r\\\\n        Contributors = {}\\\\r\\\\n    },\\\\r\\\\n\\\\r\\\\n    Dependencies = {\\\\r\\\\n        Luvit = {\\\\r\\\\n            \\\\\\\"creationix/weblit\\\\\\\",\\\\r\\\\n        },\\\\r\\\\n        Git = {},\\\\r\\\\n        Dua = {}\\\\r\\\\n    },\\\\r\\\\n\\\\r\\\\n    Contact = {\\\\r\\\\n        Website = \\\\\\\"\\\\\\\",\\\\r\\\\n        Source = \\\\\\\"\\\\\\\",\\\\r\\\\n        Socials = {}\\\\r\\\\n    },\\\\r\\\\n\\\\r\\\\n    Entrypoints = {\\\\r\\\\n        Main = \\\\\\\"openipc.host\\\\\\\"\\\\r\\\\n    }\\\\r\\\\n\\\\r\\\\n}\\\\r\\\\n\\\"\\n  }\\n}\",\n    \"/package.info.lua\":\"-- See https://github.com/Dot-lua/TypeWriter/wiki/package.info.lua-format for more info\\r\\n\\r\\nreturn { InfoVersion = 1, -- Dont touch this\\r\\n\\r\\n    ID = \\\"OpenIPC-TypeWriter\\\", -- A unique id \\r\\n    Name = \\\"OpenIPC-TypeWriter\\\",\\r\\n    Description = \\\"OpenIPC-TypeWriter Client\\\",\\r\\n    Version = \\\"1.0.0\\\",\\r\\n\\r\\n    Author = {\\r\\n        Developers = {\\r\\n            \\\"CoreByte\\\"\\r\\n        },\\r\\n        Contributors = {}\\r\\n    },\\r\\n\\r\\n    Dependencies = {\\r\\n        Luvit = {\\r\\n            \\\"creationix/coro-spawn\\\",\\r\\n            \\\"creationix/coro-http\\\",\\r\\n            \\\"creationix/coro-websocket\\\",\\r\\n        },\\r\\n        Git = {},\\r\\n        Dua = {}\\r\\n    },\\r\\n\\r\\n    Contact = {\\r\\n        Website = \\\"\\\",\\r\\n        Source = \\\"\\\",\\r\\n        Socials = {}\\r\\n    },\\r\\n\\r\\n    Entrypoints = {\\r\\n        Main = \\\"openipc.connector.Test\\\"\\r\\n    }\\r\\n\\r\\n}\\r\\n\"\n  }\n}",
    "/Node/package.json":"{\n  \"dependencies\": {\n    \"@xhayper/discord-rpc\": \"^0.0.12-beta\"\n  }\n}\n"
  }
}